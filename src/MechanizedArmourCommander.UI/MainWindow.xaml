<Window x:Class="MechanizedArmourCommander.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MechanizedArmourCommander.UI"
        mc:Ignorable="d"
        Title="Mechanized Armour Commander - Combat" Height="950" Width="1300"
        Background="#0D0D0D"
        KeyDown="Window_KeyDown">
    <Grid Margin="4">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="MECHANIZED ARMOUR COMMANDER"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="#00FF00"
                   FontFamily="Consolas"
                   HorizontalAlignment="Center"
                   Margin="0,2,0,4"/>

        <!-- Main Content: 3-column layout -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar: Active Unit Info + Action Buttons -->
            <Border Grid.Column="0"
                    BorderBrush="#004400"
                    BorderThickness="1"
                    Margin="0,0,4,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="LeftPanel" Margin="6">
                        <!-- Active unit header -->
                        <TextBlock x:Name="ActiveUnitHeader"
                                   Text="AWAITING COMBAT"
                                   FontSize="12"
                                   FontWeight="Bold"
                                   Foreground="#00FF00"
                                   FontFamily="Consolas"
                                   Margin="0,0,0,4"/>

                        <!-- Active unit details -->
                        <TextBlock x:Name="ActiveUnitInfo"
                                   FontSize="9"
                                   Foreground="#00CC00"
                                   FontFamily="Consolas"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,6"/>

                        <!-- Weapon groups display -->
                        <TextBlock x:Name="WeaponGroupsText"
                                   FontSize="9"
                                   Foreground="#00AA00"
                                   FontFamily="Consolas"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,6"/>

                        <!-- Action buttons -->
                        <TextBlock x:Name="ActionsLabel"
                                   Text="ACTIONS"
                                   FontSize="10" FontWeight="Bold"
                                   Foreground="#006600"
                                   FontFamily="Consolas"
                                   Visibility="Collapsed"
                                   Margin="0,0,0,4"/>

                        <Button x:Name="BtnMove" Content="MOVE (1 AP)"
                                Click="ActionButton_Click" Tag="Move"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="28" Margin="0,0,0,2"
                                FontFamily="Consolas" FontSize="10" FontWeight="Bold"
                                Background="#001A00" Foreground="#00FF00"
                                BorderBrush="#004400" BorderThickness="1"/>

                        <Button x:Name="BtnSprint" Content="SPRINT (2 AP)"
                                Click="ActionButton_Click" Tag="Sprint"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="28" Margin="0,0,0,2"
                                FontFamily="Consolas" FontSize="10" FontWeight="Bold"
                                Background="#001A00" Foreground="#00FF00"
                                BorderBrush="#004400" BorderThickness="1"/>

                        <!-- Dynamic fire buttons -->
                        <StackPanel x:Name="FireButtonsPanel" Margin="0,0,0,2"/>

                        <Button x:Name="BtnBrace" Content="BRACE (1 AP)"
                                Click="ActionButton_Click" Tag="Brace"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="28" Margin="0,0,0,2"
                                FontFamily="Consolas" FontSize="10" FontWeight="Bold"
                                Background="#001A00" Foreground="#00FF00"
                                BorderBrush="#004400" BorderThickness="1"/>

                        <Button x:Name="BtnOverwatch" Content="OVERWATCH (1 AP)"
                                Click="ActionButton_Click" Tag="Overwatch"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="28" Margin="0,0,0,2"
                                FontFamily="Consolas" FontSize="10" FontWeight="Bold"
                                Background="#001A00" Foreground="#00FF00"
                                BorderBrush="#004400" BorderThickness="1"/>

                        <Button x:Name="BtnVent" Content="VENT REACTOR (1 AP)"
                                Click="ActionButton_Click" Tag="Vent"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="28" Margin="0,0,0,2"
                                FontFamily="Consolas" FontSize="10" FontWeight="Bold"
                                Background="#001A00" Foreground="#00FF00"
                                BorderBrush="#004400" BorderThickness="1"/>

                        <Button x:Name="BtnEndTurn" Content="END TURN"
                                Click="EndTurn_Click"
                                Style="{x:Null}" Visibility="Collapsed"
                                Height="32" Margin="0,6,0,2"
                                FontFamily="Consolas" FontSize="11" FontWeight="Bold"
                                Background="#332200" Foreground="#FFAA00"
                                BorderBrush="#664400" BorderThickness="1"/>

                        <!-- Pre-combat info -->
                        <StackPanel x:Name="PreCombatPanel">
                            <TextBlock Text="PLAYER FORCES"
                                       FontSize="11" FontWeight="Bold"
                                       Foreground="#00FF00"
                                       FontFamily="Consolas"
                                       Margin="0,0,0,4"/>
                            <ListBox x:Name="PlayerFramesList"
                                     Background="Transparent"
                                     Foreground="#00DD00"
                                     FontFamily="Consolas"
                                     FontSize="9"
                                     BorderThickness="0"
                                     Height="160"/>
                            <TextBlock Text="ENEMY FORCES"
                                       FontSize="11" FontWeight="Bold"
                                       Foreground="#FF3333"
                                       FontFamily="Consolas"
                                       Margin="0,8,0,4"/>
                            <ListBox x:Name="EnemyFramesList"
                                     Background="Transparent"
                                     Foreground="#DD3333"
                                     FontFamily="Consolas"
                                     FontSize="9"
                                     BorderThickness="0"
                                     Height="160"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Center: Hex Map Canvas -->
            <Border Grid.Column="1"
                    BorderBrush="#004400"
                    BorderThickness="1"
                    Background="#050505"
                    Margin="0,0,4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Margin="6,3,6,0">
                        <TextBlock x:Name="MapHeaderLabel"
                                   Text="TACTICAL MAP"
                                   FontSize="10" FontWeight="Bold"
                                   Foreground="#006600"
                                   FontFamily="Consolas"
                                   HorizontalAlignment="Left"/>
                        <TextBlock x:Name="RoundLabel"
                                   FontSize="10"
                                   Foreground="#888888"
                                   FontFamily="Consolas"
                                   HorizontalAlignment="Right"/>
                    </Grid>

                    <Canvas x:Name="HexCanvas" Grid.Row="1"
                            Margin="4"
                            ClipToBounds="True"
                            MouseLeftButtonDown="HexCanvas_MouseLeftButtonDown"
                            MouseMove="HexCanvas_MouseMove"
                            MouseLeave="HexCanvas_MouseLeave"
                            SizeChanged="HexCanvas_SizeChanged"/>
                </Grid>
            </Border>

            <!-- Right Sidebar: Turn Order + Combat Feed -->
            <Border Grid.Column="2"
                    BorderBrush="#004400"
                    BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Turn Order -->
                    <StackPanel Grid.Row="0" Margin="6,4,6,0">
                        <TextBlock x:Name="TurnOrderHeader"
                                   Text="TURN ORDER"
                                   FontSize="10" FontWeight="Bold"
                                   Foreground="#006600"
                                   FontFamily="Consolas"
                                   Margin="0,0,0,2"/>
                        <StackPanel x:Name="TurnOrderPanel"/>
                    </StackPanel>

                    <!-- Separator -->
                    <Border Grid.Row="1" Height="1"
                            Background="#003300" Margin="6,4,6,4"/>

                    <!-- Combat Feed -->
                    <Grid Grid.Row="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0"
                                   Text="COMBAT FEED"
                                   FontSize="10" FontWeight="Bold"
                                   Foreground="#006600"
                                   FontFamily="Consolas"
                                   Margin="6,0,6,2"/>

                        <ScrollViewer x:Name="CombatFeedScroller" Grid.Row="1"
                                      VerticalScrollBarVisibility="Auto"
                                      Background="#050505">
                            <StackPanel x:Name="CombatFeedPanel"
                                        Margin="6,2,6,2"/>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <!-- Bottom Controls -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,4,0,0">
            <Button x:Name="StartCombatButton"
                    Content="START COMBAT"
                    Click="StartCombatButton_Click"
                    Style="{x:Null}"
                    Width="150" Height="36"
                    FontFamily="Consolas" FontSize="12" FontWeight="Bold"
                    Background="#003300" Foreground="#00FF00"
                    BorderBrush="#006600" BorderThickness="1"
                    Margin="4"/>
            <Button x:Name="AutoResolveButton"
                    Content="AUTO RESOLVE"
                    Click="AutoResolveButton_Click"
                    Visibility="Collapsed"
                    Style="{x:Null}"
                    Width="150" Height="36"
                    FontFamily="Consolas" FontSize="12" FontWeight="Bold"
                    Background="#332200" Foreground="#FFAA00"
                    BorderBrush="#664400" BorderThickness="1"
                    Margin="4"/>
            <Button x:Name="WithdrawButton"
                    Content="WITHDRAW"
                    Click="WithdrawButton_Click"
                    Visibility="Collapsed"
                    Style="{x:Null}"
                    Width="120" Height="36"
                    FontFamily="Consolas" FontSize="12" FontWeight="Bold"
                    Background="#330000" Foreground="#FF4444"
                    BorderBrush="#660000" BorderThickness="1"
                    Margin="4"/>
            <Button x:Name="ResetButton"
                    Content="RESET"
                    Click="ResetButton_Click"
                    Style="{x:Null}"
                    Width="100" Height="36"
                    FontFamily="Consolas" FontSize="12" FontWeight="Bold"
                    Background="#330000" Foreground="#FF6600"
                    BorderBrush="#662200" BorderThickness="1"
                    Margin="4"/>
        </StackPanel>
    </Grid>
</Window>
